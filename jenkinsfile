pipeline {
    agent any
    
    environment {
        DOCKER_TLS_VERIFY = ''  // Disable TLS verification
        DOCKER_IMAGE = 'test-app'
        DOCKERFILE_PATH = './dockerfile'
        NGINX_CONF_PATH = './nginx.conf'
        DIST_PATH = './dist/test-name'
    }

    stages {

        stage('Build Angular App') {
            steps {
                // Install dependencies and build the Angular app
                sh 'npm install'
                sh 'ng build --prod'
            }
        }

        stage('Run the app') {
            steps {
                // Build the Docker image
                sh "npm start"
            }
        }
    }
}
